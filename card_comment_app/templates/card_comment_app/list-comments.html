{% load bootstrap3 %}
{% load i18n %}
{% load static %}

<div class="modal-header">
<button type="button" class="close" data-dismiss="modal">&times;</button>

{% block title %}
<h4 class="modal-title">
<span class="glyphicon glyphicon-comment"></span>
Comments on card {{card.label|slice:":30"}}.. 
<span class="badge">{{records.count}}</span>
</h4>

{% endblock %}

</div>

<div class="modal-body pre-scrollable">

{% for ind in records %}
<div style="word-wrap: break-word;"> 

<p> <a href="#" title="{{ind.created}}"> {{ind.user.name}}: </a>
{{ind.data}} 
{% if ind.file %} 
<br>
<span style="color:red"> Attachment: </span>
<a  href="{% static ind.file %}"  target="_blank"> {{ind.file.name}} </a> 
{% endif %}
<br>
<em class="text-info" style="font-size:70%; "> 
On {{ind.created}}</em>

</p>


</div>

{% endfor %}

</div>

<div class="modal-footer" >
<form id="form-comment-data" enctype="multipart/form-data" onsubmit="return false;">
{% csrf_token %}

<div id="inputComment">
{% bootstrap_field form.data layout='inline' size='sm' %}
{% bootstrap_field form.file layout='inline' size='sm' %}

</div>

{% block buttons %}
<button  id="sendComment" type="button" 
data-form="#form-comment-data" 
data-shell="#bigModalContent" 
data-callback="$('#bigModal').modal('toggle');" 
data-shell-error="#bigModalContent" 
data-show="{% url 'card_comment_app:create-comment' card.id %}"
class="btn btn-default e-post">  {% trans "Send" %} </button>
{% endblock %}

</form>

<script>
$('#inputComment').keypress(function(e){
    if(e.keyCode == 13)
        $('#sendComment').click();
    e.stopPropagation();
});
$('#id_data').focus();
</script>


</div>





