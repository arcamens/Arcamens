{% load bootstrap3 %}
{% load i18n %}
{% load static %}


<div class="modal-header">
<button type="button" class="close" data-dismiss="modal">&times;</button>
<h5>
<span class="glyphicon glyphicon-search"></span>
Available {{card.label|truncatechars:20}} card's tags 
<span class="badge">{{count}}/{{total}}</span>

</h5>
</div>

<div class="modal-body">

<div class="pre-scrollable">

{% for ind in included %}
<p id="unbind-card-tag-{{ind.id}}" > <a class="e-get" style="color:red"
data-callback="$('#unbind-card-tag-{{ind.id}}').remove();"
data-show="{% url 'card_app:unbind-card-tag' card.id ind.id %}" href="#"> 
<span class="glyphicon glyphicon-remove"></span> </a>  
<b> {{ind.name}} </b>
{{ind.description}} 
</p>
{% endfor %}

{% for ind in excluded %}
<p id="bind-card-tag-{{ind.id}}">
<a class="e-get"
data-callback="$('#bind-card-tag-{{ind.id}}').remove();"
data-show="{% url 'card_app:bind-card-tag' card.id ind.id %}" href="#"> 
<span class="glyphicon glyphicon-plus"></span> </a>  <b> {{ind.name}}:</b>
 {{ind.description}} 
</p>
{% endfor %}

</div>

<br> 

<form id="tagSearchForm" enctype="multipart/form-data">
{% csrf_token %}
{% bootstrap_field form.name  size='md'  %}
{% bootstrap_form_errors form type='non_fields' %}
</form>

</div>

<div class="modal-footer">
<script>
$('#modal').one('hidden.bs.modal', function () {
    $('#main-view').load('{% url 'card_app:view-data' card.id  %}');
})
</script>

<button  type="button" data-form="#tagSearchForm" id="filterCardTags" 
data-show="{% url 'card_app:manage-card-tags' card.id  %}"
class="btn btn-default m-post"> {% trans "Search" %} </button>

<button  type="button" data-dismiss="modal" class="btn btn-default"> 
     {% trans "Close" %}
</button>

</div>


<script>
$('#tagSearchForm').on('submit', (function(e){
    e.preventDefault();
        $('#filterCardTags').click();

}));
</script>





