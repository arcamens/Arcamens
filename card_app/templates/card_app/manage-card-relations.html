{% load bootstrap3 %}
{% load i18n %}
{% load static %}


<div class="modal-header">
<button type="button" class="close" data-dismiss="modal">&times;</button>
<h6>
<span class="glyphicon glyphicon-search"></span>
Available {{card.label|truncatechars:15}} card's relations </h6>
</div>

<div class="modal-body">

{% include 'card_app/manage-card-relations-list-options.html' %}

<form id="relate-card-search-form" enctype="multipart/form-data">
{% csrf_token %}
{% bootstrap_field form.pattern  size='md' %}
{% bootstrap_field form.done  size='md' layout='inline' %}
{% bootstrap_form_errors form type='non_fields' %}
</form>

</div>

<div class="modal-footer">
<script>
$('#bigModal').one('hidden.bs.modal', function () {
    $('#main-view').load('{% url 'card_app:view-data' card.id  %}');
})
</script>

<button  type="button" data-form="#relate-card-search-form" 
data-shell="#bigModalContent"  data-shell-error="#bigModalContent" 
id="filterCardRelations"
data-show="{% url 'card_app:manage-card-relations' card.id  %}"
class="btn btn-default e-post"> {% trans "Search" %} </button>

<script>
$('#modal').one('hidden.bs.modal', function () {
    $('#main-view').load('{% url 'card_app:view-data' card.id  %}');
})
</script>

<button type="button" class="btn btn-default" 
data-dismiss="modal">Close</button>

</div>

<script>
$('#id_pattern').keypress(function(e){
    if(e.keyCode == 13) {
        $('#filterCardRelations').click();
        return false;
    }
});
</script>



