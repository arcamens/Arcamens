{% load bootstrap3 %}
{% load i18n %}

<script>
function send_file() {
   var formData = new FormData($('#form-snippet-attachment-file-data')[0]);

   $.ajax({
   url: '{% url 'snippet_app:attach-file' snippet.id  %}', 
   type: 'POST',
   success: function(data) {
   $('#div-snippet-attachments').html(data);},
   data: formData,
   cache: false,
   contentType: false,
   processData: false});
}

$('#form-snippet-attachment-file-data').change(function(){
    send_file();
});

</script>

<form id="form-snippet-attachment-file-data" enctype="multipart/form-data">
{% csrf_token %}
{% bootstrap_field form.file  size='md' %}

</form>

<div class="panel panel-default" >
<div class="panel-body">
{% for ind in attachments %}
<a class="e-get" data-shell="#div-snippet-attachments" 
data-show="{% url 'snippet_app:detach-file' ind.id %}"> 
<span class="glyphicon glyphicon-remove"></span></a> {{ind.file.name}}
<br>
{% empty %}
No file chosen.
{% endfor %}
</div>
</div>






