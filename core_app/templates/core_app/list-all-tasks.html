{% load i18n %}
{% load listutils %}
{% load bootstrap3 %}

<div class="modal-header">
<button type="button" class="close" data-dismiss="modal">&times;</button>
<h4>  
<span class="glyphicon glyphicon-tasks"></span> 
Tasks <span class="badge">{{count}}/{{total}}</span></h4>
</div>

<div class="modal-body">
<div class="pre-scrollable">
{% for ind in assignments %}
<p>

<a 
data-shell="#main-view"
data-callback="$('#bigModal').modal('toggle');" 
data-show="{% url 'post_app:post' ind.id %}"
class="e-get text-warning" href="#">
<span class="glyphicon glyphicon-file"></span> 

{% if ind.done %}
(Done)
{% endif %}

{{ind.label}}

</a>
</p>

{% endfor %}


{% for ind in tasks %}
<p>

<a 
data-shell="#main-view"
data-callback="$('#bigModal').modal('toggle');" 
data-show="{% url 'card_app:view-data' ind.id %}"
class="e-get text-warning" href="#">
<span class="glyphicon glyphicon-file"></span> 
{% if ind.done %}
(Done)
{% endif %}

{{ind.label}}

</a>
</p>

{% endfor %}

</div>
<br>
<form id="task-search-form" enctype="multipart/form-data">
{% csrf_token %}
{% bootstrap_field form.pattern  size='md' layout='inline' %}
{% bootstrap_field form.done  size='md' layout='inline' %}

{% bootstrap_form_errors form type='non_fields' %}
</form>

</div>

<div class="modal-footer">

<button  type="button" data-form="#task-search-form" 
data-shell="#bigModalContent" id="filterAllTasks"
data-shell-error="#bigModalContent" data-show="{% url 'core_app:list-all-tasks'  %}"
class="btn btn-default e-post"> {% trans "Filter" %} </button>

<button  type="button" data-dismiss="modal" class="btn btn-default"> 
     {% trans "Close" %}
</button>
</div>


<script>
$('#id_pattern').keypress(function(e){
    if(e.keyCode == 13) {
        $('#filterAllTasks').click();
        return false;
    }
});
</script>







