{% load i18n %}
{% load listutils %}
{% load bootstrap3 %}

<div class="modal-header">
<button type="button" class="close" data-dismiss="modal">&times;</button>
<h4>  
<span class="glyphicon glyphicon-tasks"></span> 
Tasks <span class="badge">{{count}}/{{total}}</span></h4>
</div>

<div class="modal-body">
<div class="pre-scrollable">
{% for ind in tasks %}
<p>

<a 
data-shell="#main-view"
data-callback="$('#bigModal').modal('toggle');" 
data-show="{{ind.get_absolute_url}}"
class="e-get text-warning" href="{{ind.get_link_url}}">
<span class="glyphicon glyphicon-file"></span> 
{% if ind.done %}
(Done)
{% endif %}

{{ind.label}}

</a>
</p>

{% endfor %}

</div>
<br>
<form id="task-search-form" enctype="multipart/form-data">
{% csrf_token %}
{% bootstrap_field form.pattern  size='md' %}
{% bootstrap_field form.done  size='md' %}

{% bootstrap_form_errors form type='non_fields' %}
</form>

</div>

<div class="modal-footer">

<button  type="button" data-form="#task-search-form" id="filterAllTasks"
href="#" data-show="{% url 'core_app:list-all-tasks'  %}" class="btn btn-default m-post"> {% trans "Filter" %} </button>

<button  type="button" data-dismiss="modal" class="btn btn-default"> 
     {% trans "Close" %}
</button>
</div>

<script>
$('#task-search-form').on('submit', (function(e){
    e.preventDefault();
        $('#filterAllTasks').click();

}));
</script>


